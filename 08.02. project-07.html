<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 8: Compliance Scan Analysis Guide</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Chosen Palette: Secure Slate -->
    <!-- The palette uses a base of Slate (neutral, professional) with accents of Emerald (Compliance/Pass), Rose (Risk/Fail), and Sky (Information). 
         This creates a calm, clean, and authoritative 'cybersecurity dashboard' aesthetic suitable for an auditing tool context. -->

    <!-- Application Structure Plan: 
         The app is designed as a "Mission Control" or "Auditor's Workbench" to guide the student through the assignment. 
         Instead of a linear text document, it breaks the task into a logical workflow:
         1. Mission Brief (Overview & Legal): High-level goals and critical warnings.
         2. Knowledge Base (Theory): Interactive breakdown of SCAP components (XCCDF, OVAL) to build the mental model.
         3. Operations Center (Execution): An interactive 'Command Builder' to simulate the tool usage and a 'Tool Selector' comparison.
         4. Analysis Lab (Interpretation): A simulated dashboard showing *sample* data to demonstrate how to read results (Pass/Fail/Error) and map them to frameworks, fulfilling the "Interpretation" learning objective.
         5. Action Plan (Remediation): A tiered priority matrix builder to visualize the output strategy.
         This structure transforms the static instructions into an actionable process flow. -->

    <!-- Visualization & Content Choices:
         1. SCAP Architecture Diagram (HTML/CSS): 
            - Goal: Explain the relationship between XCCDF, OVAL, and ARF.
            - Viz: A Flexbox-based flow diagram using styled div blocks and CSS borders for arrows. 
            - Interaction: Hover effects to reveal definitions.
            - Justification: Visualizes the abstract text from Part 1. No SVG used.
         2. Command Builder (Interactive Form):
            - Goal: Teach the OpenSCAP command syntax.
            - Viz: Input fields mapped to a code block.
            - Interaction: Real-time string concatenation based on user input.
            - Justification: Active learning of the command line instruction.
         3. Sample Compliance Dashboard (Chart.js):
            - Goal: Illustrate "Component 3: Initial Results Interpretation".
            - Viz: Donut Chart (Compliance Score) and Bar Chart (Severity Breakdown).
            - Interaction: Click on chart segments to filter a "Sample Findings List".
            - Justification: Shows the user what their final analysis should look like.
         4. Prioritization Matrix (Interactive Table):
            - Goal: Explain Part 3, Component 2 (Remediation).
            - Viz: A 3-column layout representing Tiers 1, 2, and 3.
            - Interaction: Click to expand tier definitions and timeframes.
            - Justification: Clarifies the categorization logic. -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
            color: #334155; /* Slate 700 */
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Chart Container Styling - MANDATORY */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Card Hover Effects */
        .interactive-card {
            transition: all 0.3s ease;
        }
        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-color: #0ea5e9; /* Sky 500 */
        }

        /* Flow Diagram Connector Arrows (CSS Only) */
        .arrow-right::after {
            content: '';
            display: inline-block;
            width: 0;
            height: 0;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            border-left: 8px solid #94a3b8;
            margin-left: 8px;
        }
        
        .step-connector {
            position: relative;
        }
        .step-connector::after {
            content: '';
            position: absolute;
            top: 50%;
            right: -20px;
            width: 20px;
            height: 2px;
            background-color: #cbd5e1;
            z-index: 0;
            display: none;
        }
        @media(min-width: 1024px) {
            .step-connector::after {
                display: block;
            }
        }

        .nav-item.active {
            background-color: #e2e8f0;
            color: #0f172a;
            border-left: 4px solid #0ea5e9;
        }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

    <!-- Sidebar Navigation -->
    <nav class="w-64 bg-slate-900 text-slate-300 flex-shrink-0 flex flex-col hidden md:flex h-full shadow-xl z-20">
        <div class="p-6 border-b border-slate-700">
            <h1 class="text-white font-bold text-xl tracking-tight">CyberAudit<span class="text-sky-500">.io</span></h1>
            <p class="text-xs text-slate-400 mt-1 uppercase tracking-wider">Module 8: Task 7</p>
        </div>
        <div class="flex-1 overflow-y-auto py-4 space-y-1">
            <button onclick="navigate('intro')" class="nav-item w-full text-left px-6 py-3 hover:bg-slate-800 transition-colors active" id="nav-intro">
                <span class="flex items-center gap-3">
                    <span class="text-lg">üõ°Ô∏è</span> Mission Brief
                </span>
            </button>
            <button onclick="navigate('theory')" class="nav-item w-full text-left px-6 py-3 hover:bg-slate-800 transition-colors" id="nav-theory">
                <span class="flex items-center gap-3">
                    <span class="text-lg">üìö</span> Knowledge Base
                </span>
            </button>
            <button onclick="navigate('execution')" class="nav-item w-full text-left px-6 py-3 hover:bg-slate-800 transition-colors" id="nav-execution">
                <span class="flex items-center gap-3">
                    <span class="text-lg">‚öôÔ∏è</span> Operations Center
                </span>
            </button>
            <button onclick="navigate('analysis')" class="nav-item w-full text-left px-6 py-3 hover:bg-slate-800 transition-colors" id="nav-analysis">
                <span class="flex items-center gap-3">
                    <span class="text-lg">üìä</span> Analysis Lab
                </span>
            </button>
            <button onclick="navigate('remediation')" class="nav-item w-full text-left px-6 py-3 hover:bg-slate-800 transition-colors" id="nav-remediation">
                <span class="flex items-center gap-3">
                    <span class="text-lg">ü©π</span> Action Plan
                </span>
            </button>
        </div>
        <div class="p-4 border-t border-slate-700 text-xs text-slate-500">
            <p>Simulated Compliance Scan Analysis</p>
            <p class="mt-1">Duration: 4 Hours</p>
        </div>
    </nav>

    <!-- Mobile Header -->
    <div class="md:hidden fixed top-0 w-full bg-slate-900 text-white z-50 flex justify-between items-center p-4 shadow-md">
        <span class="font-bold">Module 8: Task 7</span>
        <button id="mobile-menu-btn" class="text-slate-300 focus:outline-none">‚ò∞ Menu</button>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 bg-slate-900 bg-opacity-95 z-40 hidden flex flex-col justify-center items-center space-y-6 text-xl text-white md:hidden">
        <button onclick="navigate('intro'); toggleMobileMenu()" class="hover:text-sky-400">Mission Brief</button>
        <button onclick="navigate('theory'); toggleMobileMenu()" class="hover:text-sky-400">Knowledge Base</button>
        <button onclick="navigate('execution'); toggleMobileMenu()" class="hover:text-sky-400">Operations Center</button>
        <button onclick="navigate('analysis'); toggleMobileMenu()" class="hover:text-sky-400">Analysis Lab</button>
        <button onclick="navigate('remediation'); toggleMobileMenu()" class="hover:text-sky-400">Action Plan</button>
        <button onclick="toggleMobileMenu()" class="text-sm text-slate-400 mt-8">Close</button>
    </div>

    <!-- Main Content Area -->
    <main class="flex-1 h-full overflow-y-auto bg-slate-50 pt-16 md:pt-0 relative scroll-smooth" id="main-scroll">
        
        <!-- SECTION 1: MISSION BRIEF -->
        <section id="intro" class="p-6 md:p-10 max-w-7xl mx-auto min-h-screen">
            <header class="mb-8">
                <div class="inline-block px-3 py-1 rounded-full bg-slate-200 text-slate-600 text-xs font-semibold mb-3">Project Task 7</div>
                <h2 class="text-4xl font-bold text-slate-800 mb-4">Simulated Compliance Scan Analysis</h2>
                <p class="text-lg text-slate-600 max-w-3xl leading-relaxed">
                    Welcome to the Auditor's Workbench. Your mission is to execute a simulated compliance scan, analyze the technical findings against regulatory frameworks (PIPEDA, NIST), and develop a strategic remediation plan. This interactive guide consolidates the theoretical foundations and practical steps required for your analysis report.
                </p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10">
                <!-- Warning Card -->
                <div class="bg-rose-50 border-l-4 border-rose-500 p-6 rounded-r-lg shadow-sm">
                    <div class="flex items-start">
                        <span class="text-3xl mr-4">‚ö†Ô∏è</span>
                        <div>
                            <h3 class="text-rose-800 font-bold text-lg mb-2">CRITICAL: Legal Boundaries</h3>
                            <p class="text-rose-700 text-sm mb-3">
                                Scanning unauthorized systems is a criminal offense (Criminal Code Section 342.1).
                            </p>
                            <ul class="text-rose-700 text-sm list-disc pl-4 space-y-1">
                                <li>Scan <strong>ONLY</strong> the provided VM.</li>
                                <li><strong>Verify</strong> network isolation before launch.</li>
                                <li>Personal cloud systems are <strong>OFF LIMITS</strong> without written consent.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Deliverable Card -->
                <div class="bg-white border border-slate-200 p-6 rounded-lg shadow-sm">
                    <h3 class="text-slate-800 font-bold text-lg mb-2 flex items-center gap-2">
                        <span>üì¶</span> Deliverable Specs
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center text-sm border-b border-slate-100 pb-2">
                            <span class="text-slate-500">Format</span>
                            <span class="font-medium text-slate-700">Technical Report (PDF) + Raw Data</span>
                        </div>
                        <div class="flex justify-between items-center text-sm border-b border-slate-100 pb-2">
                            <span class="text-slate-500">Length</span>
                            <span class="font-medium text-slate-700">Max 4 Pages (A4)</span>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <span class="text-slate-500">Weight</span>
                            <span class="font-medium text-slate-700">Execution (50%) / Analysis (25%) / Plan (25%)</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-sky-50 rounded-xl p-6 border border-sky-100">
                <h3 class="text-sky-900 font-bold mb-4">Course Context</h3>
                <p class="text-sky-800 text-sm leading-relaxed">
                    This exercise focuses on the practical application of <strong>Cybersecurity Legislation and Compliance Assessments</strong>. You will move beyond theory to use industry-standard tools like OpenSCAP to verify alignment with frameworks such as NIST 800-53 or CIS Benchmarks. The goal is to translate technical "failed" checks into business risk intelligence.
                </p>
            </div>
            
            <div class="mt-8 text-center">
                <button onclick="navigate('theory')" class="bg-slate-900 text-white px-8 py-3 rounded-lg hover:bg-slate-800 transition shadow-lg flex items-center gap-2 mx-auto">
                    Initialize Theory Module <span class="arrow-right border-l-white"></span>
                </button>
            </div>
        </section>

        <!-- SECTION 2: KNOWLEDGE BASE -->
        <section id="theory" class="p-6 md:p-10 max-w-7xl mx-auto min-h-screen hidden">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">SCAP Architecture</h2>
                <p class="text-slate-600">
                    Understanding the "Security Content Automation Protocol" is essential for interpreting your results. SCAP isn't a single tool; it's a language composed of standardized parts.
                </p>
            </header>

            <!-- SCAP Interactive Flow -->
            <div class="bg-white p-8 rounded-xl shadow-sm border border-slate-200 mb-8 overflow-x-auto">
                <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-6 text-center">The Anatomy of a Compliance Scan</h3>
                
                <div class="flex flex-col lg:flex-row justify-between items-stretch gap-6 min-w-[800px]">
                    
                    <!-- Component 1: XCCDF -->
                    <div class="flex-1 step-connector interactive-card group cursor-help bg-slate-50 p-5 rounded-lg border border-slate-200 relative">
                        <div class="absolute -top-3 left-4 bg-purple-100 text-purple-700 text-xs font-bold px-2 py-1 rounded">The Checklist</div>
                        <h4 class="font-bold text-slate-800 text-lg mb-2">XCCDF</h4>
                        <p class="text-xs text-slate-500 mb-2">Extensible Configuration Checklist Description Format</p>
                        <p class="text-sm text-slate-600">Defines <strong>WHAT</strong> to check.</p>
                        <div class="mt-4 p-3 bg-white rounded border border-slate-100 text-xs font-mono text-purple-600 opacity-60 group-hover:opacity-100 transition-opacity">
                            &lt;Rule id="ssh_v2"&gt;<br>
                            &nbsp;&nbsp;&lt;title&gt;SSH Protocol 2&lt;/title&gt;<br>
                            &lt;/Rule&gt;
                        </div>
                    </div>

                    <!-- Component 2: OVAL -->
                    <div class="flex-1 step-connector interactive-card group cursor-help bg-slate-50 p-5 rounded-lg border border-slate-200 relative">
                        <div class="absolute -top-3 left-4 bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded">The Engine</div>
                        <h4 class="font-bold text-slate-800 text-lg mb-2">OVAL</h4>
                        <p class="text-xs text-slate-500 mb-2">Open Vulnerability and Assessment Language</p>
                        <p class="text-sm text-slate-600">Defines <strong>HOW</strong> to check it.</p>
                        <div class="mt-4 p-3 bg-white rounded border border-slate-100 text-xs font-mono text-blue-600 opacity-60 group-hover:opacity-100 transition-opacity">
                            &lt;file_test&gt;<br>
                            &nbsp;&nbsp;&lt;path&gt;/etc/ssh/sshd_config&lt;/path&gt;<br>
                            &lt;/file_test&gt;
                        </div>
                    </div>

                    <!-- Component 3: The Scanner -->
                    <div class="flex-1 step-connector interactive-card bg-slate-800 p-5 rounded-lg border border-slate-700 text-white relative flex flex-col justify-center items-center text-center">
                        <div class="text-4xl mb-2">‚öôÔ∏è</div>
                        <h4 class="font-bold text-white text-lg">Scanner</h4>
                        <p class="text-xs text-slate-400 mt-1">OpenSCAP / Nessus</p>
                        <p class="text-sm text-slate-300 mt-2">Combines Rules (XCCDF) + Checks (OVAL) against the System.</p>
                    </div>

                    <!-- Component 4: ARF -->
                    <div class="flex-1 interactive-card group cursor-help bg-slate-50 p-5 rounded-lg border border-slate-200 relative">
                        <div class="absolute -top-3 left-4 bg-emerald-100 text-emerald-700 text-xs font-bold px-2 py-1 rounded">The Evidence</div>
                        <h4 class="font-bold text-slate-800 text-lg mb-2">ARF</h4>
                        <p class="text-xs text-slate-500 mb-2">Asset Reporting Format</p>
                        <p class="text-sm text-slate-600">The <strong>RESULT</strong> container.</p>
                        <div class="mt-4 p-3 bg-white rounded border border-slate-100 text-xs font-mono text-emerald-600 opacity-60 group-hover:opacity-100 transition-opacity">
                            &lt;test-result&gt;<br>
                            &nbsp;&nbsp;&lt;rule-result id="ssh_v2"&gt;<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&lt;result&gt;fail&lt;/result&gt;<br>
                            &nbsp;&nbsp;&lt;/rule-result&gt;<br>
                            &lt;/test-result&gt;
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="font-bold text-slate-800 mb-3">Why Automation?</h3>
                    <p class="text-sm text-slate-600 mb-4">
                        Manual verification of thousands of settings is impossible. Automated scanning ensures configurations haven't drifted from the approved baseline due to updates or errors.
                    </p>
                    <ul class="text-sm text-slate-600 space-y-2">
                        <li class="flex items-center gap-2"><span class="text-emerald-500">‚úî</span> Consistent verification methodology</li>
                        <li class="flex items-center gap-2"><span class="text-emerald-500">‚úî</span> Evidence for PIPEDA/GDPR audits</li>
                        <li class="flex items-center gap-2"><span class="text-emerald-500">‚úî</span> Scalable across fleet of servers</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="font-bold text-slate-800 mb-3">Result States</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <div class="p-2 bg-emerald-50 border border-emerald-100 rounded text-center">
                            <div class="text-emerald-700 font-bold text-sm">Pass</div>
                            <div class="text-emerald-600 text-xs">Compliant</div>
                        </div>
                        <div class="p-2 bg-rose-50 border border-rose-100 rounded text-center">
                            <div class="text-rose-700 font-bold text-sm">Fail</div>
                            <div class="text-rose-600 text-xs">Action Required</div>
                        </div>
                        <div class="p-2 bg-amber-50 border border-amber-100 rounded text-center">
                            <div class="text-amber-700 font-bold text-sm">Error</div>
                            <div class="text-amber-600 text-xs">Scan Issue</div>
                        </div>
                        <div class="p-2 bg-slate-100 border border-slate-200 rounded text-center">
                            <div class="text-slate-700 font-bold text-sm">N/A</div>
                            <div class="text-slate-600 text-xs">Not Applicable</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: OPERATIONS CENTER (EXECUTION) -->
        <section id="execution" class="p-6 md:p-10 max-w-7xl mx-auto min-h-screen hidden">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">Operations Center</h2>
                <p class="text-slate-600">
                    Configure your scanning tools. You may use OpenSCAP (recommended) or a commercial alternative like Nessus or Qualys. Below is a simulation of the OpenSCAP command line workflow.
                </p>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left: Tool Configurator -->
                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                        <h3 class="font-bold text-slate-800 mb-4">Command Builder</h3>
                        
                        <div class="mb-4">
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Target Profile</label>
                            <select id="profile-select" onchange="updateCommand()" class="w-full p-2 border border-slate-300 rounded text-sm bg-slate-50 focus:ring-2 focus:ring-sky-500 focus:outline-none">
                                <option value="xccdf_org.ssgproject.content_profile_pci-dss">PCI-DSS (Payment Card Industry)</option>
                                <option value="xccdf_org.ssgproject.content_profile_hipaa">HIPAA (Healthcare)</option>
                                <option value="xccdf_org.ssgproject.content_profile_nist-800-171-cui">NIST 800-171 (CUI)</option>
                                <option value="xccdf_org.ssgproject.content_profile_cis">CIS Benchmark Level 1</option>
                            </select>
                        </div>

                        <div class="mb-4">
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Content File (Data Stream)</label>
                            <select id="content-select" onchange="updateCommand()" class="w-full p-2 border border-slate-300 rounded text-sm bg-slate-50 focus:ring-2 focus:ring-sky-500 focus:outline-none">
                                <option value="ssg-rhel8-ds.xml">RHEL 8 Data Stream</option>
                                <option value="ssg-ubuntu2004-ds.xml">Ubuntu 20.04 Data Stream</option>
                                <option value="ssg-fedora-ds.xml">Fedora Data Stream</option>
                            </select>
                        </div>

                        <div class="mb-4">
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Output Path</label>
                            <input type="text" id="path-input" oninput="updateCommand()" value="/tmp/scan-results" class="w-full p-2 border border-slate-300 rounded text-sm bg-slate-50 focus:ring-2 focus:ring-sky-500 focus:outline-none">
                        </div>
                    </div>

                    <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-100 text-sm">
                        <strong class="text-indigo-900 block mb-2">Did You Know?</strong>
                        <p class="text-indigo-800">You can customize scan profiles to fit specific organizational needs by creating a "Tailoring" file, allowing you to unselect rules that don't apply to your environment.</p>
                    </div>
                </div>

                <!-- Right: Terminal Simulation -->
                <div class="lg:col-span-2">
                    <div class="bg-slate-900 rounded-lg shadow-xl overflow-hidden h-full flex flex-col">
                        <div class="bg-slate-800 px-4 py-2 flex items-center gap-2 border-b border-slate-700">
                            <div class="w-3 h-3 rounded-full bg-red-500"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                            <div class="w-3 h-3 rounded-full bg-green-500"></div>
                            <span class="text-xs text-slate-400 ml-2">student@northstream-vm: ~</span>
                        </div>
                        <div class="p-6 font-mono text-sm text-slate-300 flex-1 overflow-auto">
                            <p class="text-slate-500 mb-4"># Verify OpenSCAP installation</p>
                            <p class="mb-4"><span class="text-green-400">student@vm:~$</span> oscap --version</p>
                            
                            <p class="text-slate-500 mb-2"># Execute Compliance Scan</p>
                            <div class="bg-slate-950 p-4 rounded border border-slate-700 mb-4 group relative">
                                <code id="command-output" class="text-sky-300 break-all">sudo oscap xccdf eval --profile xccdf_org.ssgproject.content_profile_pci-dss --results-arf /tmp/scan-results-arf.xml --report /tmp/scan-results.html ssg-rhel8-ds.xml</code>
                                <button onclick="copyCommand()" class="absolute top-2 right-2 bg-slate-800 hover:bg-slate-700 text-xs px-2 py-1 rounded text-white opacity-0 group-hover:opacity-100 transition-opacity">Copy</button>
                            </div>

                            <p class="text-slate-500 italic mt-8 typing-effect hidden" id="sim-log">
                                Loading content...<br>
                                Resolving profile...<br>
                                Starting evaluation...<br>
                                [INFO] Rule: Ensure SSH Protocol is set to 2... <span class="text-red-400">FAIL</span><br>
                                [INFO] Rule: Ensure root login is disabled... <span class="text-green-400">PASS</span><br>
                                [INFO] Rule: Ensure password complexity... <span class="text-red-400">FAIL</span><br>
                                Generating report... Done.
                            </p>
                        </div>
                        <div class="p-4 bg-slate-800 border-t border-slate-700 text-right">
                            <button onclick="runSimulation()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm font-bold transition">Run Simulation</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: ANALYSIS LAB (INTERPRETATION) -->
        <section id="analysis" class="p-6 md:p-10 max-w-7xl mx-auto min-h-screen hidden">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">Analysis Lab</h2>
                <p class="text-slate-600">
                    This dashboard simulates the data you will extract from your scan. Use these visualizations as a reference for the "Quantitative Results Summary" required in your report (Component 3).
                </p>
            </header>

            <!-- Top Stats Row -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="bg-white p-4 rounded shadow-sm border-l-4 border-slate-400">
                    <div class="text-slate-500 text-xs font-bold uppercase">Total Rules</div>
                    <div class="text-2xl font-bold text-slate-800">248</div>
                </div>
                <div class="bg-white p-4 rounded shadow-sm border-l-4 border-emerald-500">
                    <div class="text-emerald-600 text-xs font-bold uppercase">Passed</div>
                    <div class="text-2xl font-bold text-slate-800">182</div>
                    <div class="text-xs text-emerald-600">73.4% Compliance</div>
                </div>
                <div class="bg-white p-4 rounded shadow-sm border-l-4 border-rose-500">
                    <div class="text-rose-600 text-xs font-bold uppercase">Failed</div>
                    <div class="text-2xl font-bold text-slate-800">58</div>
                    <div class="text-xs text-rose-600">Requires Remediation</div>
                </div>
                <div class="bg-white p-4 rounded shadow-sm border-l-4 border-amber-500">
                    <div class="text-amber-600 text-xs font-bold uppercase">Other / N/A</div>
                    <div class="text-2xl font-bold text-slate-800">8</div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <!-- Chart 1: Compliance Overview -->
                <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="font-bold text-slate-800 mb-4">Overall Compliance Score</h3>
                    <div class="chart-container">
                        <canvas id="complianceChart"></canvas>
                    </div>
                    <p class="text-xs text-slate-500 mt-4 text-center">Figure 1: High-level compliance status. Include this breakdown in Page 1 of your report.</p>
                </div>

                <!-- Chart 2: Severity Breakdown -->
                <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="font-bold text-slate-800 mb-4">Failed Rules by Severity</h3>
                    <div class="chart-container">
                        <canvas id="severityChart"></canvas>
                    </div>
                    <p class="text-xs text-slate-500 mt-4 text-center">Figure 2: Risk prioritization. Focus your "Detailed Finding Analysis" on the High/Critical failures.</p>
                </div>
            </div>

            <!-- Finding Analysis Template -->
            <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-bold text-slate-800">Sample Deep Dive Analysis</h3>
                    <span class="bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded">Template for Component 4</span>
                </div>
                
                <div class="border border-slate-200 rounded overflow-hidden">
                    <div class="bg-rose-50 p-3 border-b border-rose-100 flex justify-between items-center">
                        <span class="font-mono text-rose-800 font-bold">Rule: sshd_disable_root_login</span>
                        <span class="bg-rose-200 text-rose-800 text-xs px-2 py-1 rounded font-bold">HIGH SEVERITY</span>
                    </div>
                    <div class="p-4 grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <h4 class="text-xs font-bold text-slate-400 uppercase mb-1">Observation</h4>
                            <p class="text-sm text-slate-700">Root login via SSH is currently <strong>ENABLED</strong>. Expected state is <strong>DISABLED</strong>.</p>
                        </div>
                        <div>
                            <h4 class="text-xs font-bold text-slate-400 uppercase mb-1">Risk Assessment</h4>
                            <p class="text-sm text-slate-700">Attackers brute-forcing the root account gain immediate full system control. High likelihood, Critical impact.</p>
                        </div>
                        <div>
                            <h4 class="text-xs font-bold text-slate-400 uppercase mb-1">Remediation</h4>
                            <p class="text-sm text-slate-700 font-mono text-xs bg-slate-50 p-1 rounded">Edit /etc/ssh/sshd_config:<br>PermitRootLogin no</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: REMEDIATION PLAN -->
        <section id="remediation" class="p-6 md:p-10 max-w-7xl mx-auto min-h-screen hidden">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-2">Remediation Strategy</h2>
                <p class="text-slate-600">
                    Raw results must be translated into a prioritized plan. Group your findings into the three tiers defined below to create the "Prioritization Matrix".
                </p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <!-- Tier 1 -->
                <div class="bg-white border-t-4 border-rose-600 p-6 rounded shadow-sm hover:shadow-md transition">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-slate-800 text-lg">TIER 1</h3>
                        <span class="text-xs font-bold bg-rose-100 text-rose-700 px-2 py-1 rounded">Immediate</span>
                    </div>
                    <p class="text-3xl font-bold text-rose-600 mb-2">0-30 Days</p>
                    <p class="text-sm text-slate-600 mb-4">Critical vulnerabilities, public-facing exposures, or easy wins with high risk reduction.</p>
                    <div class="text-xs bg-slate-50 p-2 rounded text-slate-500">
                        <strong>Examples:</strong>
                        <ul class="list-disc pl-4 mt-1">
                            <li>Default passwords</li>
                            <li>Unpatched critical services</li>
                            <li>Open firewall ports</li>
                        </ul>
                    </div>
                </div>

                <!-- Tier 2 -->
                <div class="bg-white border-t-4 border-amber-500 p-6 rounded shadow-sm hover:shadow-md transition">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-slate-800 text-lg">TIER 2</h3>
                        <span class="text-xs font-bold bg-amber-100 text-amber-700 px-2 py-1 rounded">Short-term</span>
                    </div>
                    <p class="text-3xl font-bold text-amber-600 mb-2">30-90 Days</p>
                    <p class="text-sm text-slate-600 mb-4">High/Medium severity requiring testing, configuration changes, or planned downtime.</p>
                    <div class="text-xs bg-slate-50 p-2 rounded text-slate-500">
                        <strong>Examples:</strong>
                        <ul class="list-disc pl-4 mt-1">
                            <li>TLS/SSL cipher suites</li>
                            <li>Audit logging tuning</li>
                            <li>User permission trimming</li>
                        </ul>
                    </div>
                </div>

                <!-- Tier 3 -->
                <div class="bg-white border-t-4 border-sky-500 p-6 rounded shadow-sm hover:shadow-md transition">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-slate-800 text-lg">TIER 3</h3>
                        <span class="text-xs font-bold bg-sky-100 text-sky-700 px-2 py-1 rounded">Planned</span>
                    </div>
                    <p class="text-3xl font-bold text-sky-600 mb-2">90+ Days</p>
                    <p class="text-sm text-slate-600 mb-4">Low severity, complex architecture changes, or expensive upgrades.</p>
                    <div class="text-xs bg-slate-50 p-2 rounded text-slate-500">
                        <strong>Examples:</strong>
                        <ul class="list-disc pl-4 mt-1">
                            <li>OS major version upgrades</li>
                            <li>Hardware replacement</li>
                            <li>Policy documentation</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-slate-800 text-slate-300 p-6 rounded-lg">
                <h3 class="text-white font-bold mb-4 flex items-center gap-2">
                    <span>üîÑ</span> Continuous Monitoring
                </h3>
                <p class="mb-4 text-sm">Compliance is a state, not a destination. Your report must recommend a schedule:</p>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                    <div class="bg-slate-700 p-3 rounded border border-slate-600">
                        <div class="font-bold text-white text-sm">Weekly</div>
                        <div class="text-xs text-slate-400">Automated Vulnerability Scans</div>
                    </div>
                    <div class="bg-slate-700 p-3 rounded border border-slate-600">
                        <div class="font-bold text-white text-sm">Monthly</div>
                        <div class="text-xs text-slate-400">Patch Validation & Reporting</div>
                    </div>
                    <div class="bg-slate-700 p-3 rounded border border-slate-600">
                        <div class="font-bold text-white text-sm">Quarterly</div>
                        <div class="text-xs text-slate-400">Full Compliance Audit (XCCDF)</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer spacer -->
        <div class="h-20"></div>

    </main>

    <script>
        // --- Navigation Logic ---
        function navigate(sectionId) {
            // Hide all sections
            const sections = ['intro', 'theory', 'execution', 'analysis', 'remediation'];
            sections.forEach(id => {
                document.getElementById(id).classList.add('hidden');
                document.getElementById('nav-' + id)?.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById('nav-' + sectionId)?.classList.add('active');

            // Scroll to top
            document.getElementById('main-scroll').scrollTop = 0;

            // Trigger charts if analysis section is opened
            if (sectionId === 'analysis') {
                renderCharts();
            }
        }

        // --- Mobile Menu ---
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }
        document.getElementById('mobile-menu-btn').addEventListener('click', toggleMobileMenu);

        // --- Operations Center: Command Builder ---
        function updateCommand() {
            const profile = document.getElementById('profile-select').value;
            const content = document.getElementById('content-select').value;
            const path = document.getElementById('path-input').value;
            
            // Sanitize input roughly for display
            const safePath = path.replace(/[^a-zA-Z0-9\/._-]/g, '');
            const safeReport = safePath + ".html";
            const safeArf = safePath + "-arf.xml";

            const command = `sudo oscap xccdf eval --profile ${profile} --results-arf ${safeArf} --report ${safeReport} ${content}`;
            
            document.getElementById('command-output').innerText = command;
        }

        function copyCommand() {
            const text = document.getElementById('command-output').innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert("Command copied to clipboard!");
            });
        }

        function runSimulation() {
            const log = document.getElementById('sim-log');
            log.classList.remove('hidden');
            log.innerHTML = ""; // Clear previous

            const lines = [
                "Initializing OpenSCAP scanner...",
                "Loading content stream...",
                "Resolving profile rules...",
                "Starting evaluation phase...",
                "[INFO] Checking password_max_days... <span class='text-green-400'>PASS</span>",
                "[INFO] Checking sshd_protocol_version... <span class='text-green-400'>PASS</span>",
                "[INFO] Checking sshd_root_login... <span class='text-red-400'>FAIL</span>",
                "[INFO] Checking partition_noexec_tmp... <span class='text-red-400'>FAIL</span>",
                "Exporting ARF results...",
                "Generating HTML report...",
                "<span class='text-sky-400'>Scan Complete. Results saved.</span>"
            ];

            let i = 0;
            function typeLine() {
                if (i < lines.length) {
                    log.innerHTML += lines[i] + "<br>";
                    i++;
                    setTimeout(typeLine, 500); // 500ms delay between lines
                }
            }
            typeLine();
        }

        // --- Analysis Lab: Chart.js ---
        let complianceChart = null;
        let severityChart = null;

        function renderCharts() {
            if (complianceChart || severityChart) return; // Prevent re-rendering

            // Chart 1: Compliance Overview (Donut)
            const ctx1 = document.getElementById('complianceChart').getContext('2d');
            complianceChart = new Chart(ctx1, {
                type: 'doughnut',
                data: {
                    labels: ['Pass (Compliant)', 'Fail (Non-Compliant)', 'Error/Unknown', 'Not Applicable'],
                    datasets: [{
                        data: [182, 58, 2, 6],
                        backgroundColor: ['#10b981', '#f43f5e', '#f59e0b', '#cbd5e1'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });

            // Chart 2: Severity Breakdown (Bar)
            const ctx2 = document.getElementById('severityChart').getContext('2d');
            severityChart = new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ['Critical', 'High', 'Medium', 'Low'],
                    datasets: [{
                        label: 'Failed Rules',
                        data: [4, 12, 28, 14],
                        backgroundColor: ['#be123c', '#f43f5e', '#fb923c', '#fcd34d'],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        // Initialize default view
        document.addEventListener('DOMContentLoaded', () => {
            // Check if URL hash exists for direct linking
            const hash = window.location.hash.substring(1);
            if(hash && ['intro', 'theory', 'execution', 'analysis', 'remediation'].includes(hash)) {
                navigate(hash);
            }
        });

    </script>
</body>
</html>





